<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/static/favicon.svg" type="image/svg+xml">
    <title>LPR - –û–∂–∏–¥–∞–Ω–∏–µ</title>
    <script src="/static/tailwind.js"></script>
    <style>
        .card { background: white; border: 1px solid hsl(214.3 31.8% 91.4%); border-radius: 0.5rem; box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1); }
        .btn { display: inline-flex; align-items: center; justify-content: center; border-radius: 0.375rem; font-size: 0.875rem; font-weight: 500; height: 2.5rem; padding: 0 1rem; transition: all 0.2s; text-decoration: none; }
        .btn-primary { background: hsl(222.2 47.4% 11.2%); color: white; }
        .btn-primary:hover { background: hsl(222.2 47.4% 20%); }
        .btn-secondary { background: hsl(210 40% 96.1%); color: hsl(222.2 47.4% 11.2%); border: 1px solid hsl(214.3 31.8% 91.4%); }
        .btn-secondary:hover { background: hsl(210 40% 90%); }
        .btn-destructive { background: white; color: hsl(0 84.2% 60.2%); border: 1px solid hsl(0 84.2% 60.2%); }
        .btn-destructive:hover { background: hsl(0 84.2% 97%); }
        .btn-sm { height: 2rem; padding: 0 0.75rem; font-size: 0.75rem; }
        .input { height: 2.5rem; width: 100%; border-radius: 0.375rem; border: 1px solid hsl(214.3 31.8% 91.4%); padding: 0 0.75rem; font-size: 0.875rem; background: white; }
        .input:focus { outline: 2px solid hsl(222.2 84% 4.9%); outline-offset: -1px; }
        .checkbox { width: 1rem; height: 1rem; border-radius: 0.25rem; border: 1px solid hsl(214.3 31.8% 80%); cursor: pointer; }
        .checkbox:checked { background: hsl(222.2 47.4% 11.2%); border-color: hsl(222.2 47.4% 11.2%); }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-2xl mx-auto p-4 sm:p-6">
        <!-- Header -->
        <div class="flex items-center justify-between mb-6">
            <h1 class="text-2xl font-semibold text-gray-900">–û–∂–∏–¥–∞–Ω–∏–µ</h1>
            <a href="/" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥</a>
        </div>

        {% if added %}
        <div class="card p-4 mb-6 bg-green-50 border-green-200">
            <p class="text-green-800 text-sm font-medium">–ù–æ–º–µ—Ä "{{ added }}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ª–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è</p>
        </div>
        {% endif %}

        {% if removed %}
        <div class="card p-4 mb-6 bg-blue-50 border-blue-200">
            <p class="text-blue-800 text-sm font-medium">–ù–æ–º–µ—Ä "{{ removed }}" —É–¥–∞–ª—ë–Ω –∏–∑ –ª–∏—Å—Ç–∞ –æ–∂–∏–¥–∞–Ω–∏—è</p>
        </div>
        {% endif %}

        <!-- Add Form -->
        <div class="card p-6 mb-6">
            <h2 class="text-lg font-medium text-gray-900 mb-4">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä</h2>

            <form action="/watchlist/add" method="POST">
                <div class="flex flex-col sm:flex-row gap-3">
                    <input type="text" name="pattern" placeholder="–ù–æ–º–µ—Ä –∏–ª–∏ —á–∞—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ê123–í–° –∏–ª–∏ 790)" required class="input flex-1">
                    <button type="submit" class="btn btn-primary whitespace-nowrap">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div class="flex items-center gap-2 mt-3">
                    <input type="checkbox" name="delete_on_match" value="1" id="delete_on_match" class="checkbox">
                    <label for="delete_on_match" class="text-sm text-gray-600 cursor-pointer">–£–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è</label>
                </div>
            </form>

            <p class="text-xs text-gray-500 mt-4">
                –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–º–µ—Ä–∞, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, –ø—Ä–∏–¥—ë—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram.
            </p>
        </div>

        <!-- Watchlist -->
        <div class="card p-6">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-medium text-gray-900">–õ–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è</h2>
                <span class="text-sm text-gray-500">{{ watchlist | length }} —à—Ç.</span>
            </div>

            {% if watchlist %}
            <div class="space-y-2">
                {% for item in watchlist %}
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                    <div class="flex items-center gap-3">
                        <span class="text-lg font-mono font-bold text-gray-900 tracking-wider">{{ item.pattern }}</span>
                        {% if item.delete_on_match %}
                        <span class="text-xs px-2 py-0.5 bg-amber-100 text-amber-700 rounded-full">–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π</span>
                        {% endif %}
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="text-xs text-gray-400 hidden sm:block">{{ item.created_at }}</span>
                        <form action="/watchlist/remove" method="POST" class="m-0">
                            <input type="hidden" name="pattern" value="{{ item.pattern }}">
                            <button type="submit" class="btn btn-destructive btn-sm" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å {{ item.pattern }}?');">–£–¥–∞–ª–∏—Ç—å</button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-8">
                <div class="text-gray-400 text-3xl mb-2">üìã</div>
                <p class="text-gray-500">–õ–∏—Å—Ç –æ–∂–∏–¥–∞–Ω–∏—è –ø—É—Å—Ç</p>
                <p class="text-gray-400 text-sm">–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–º–µ—Ä –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è</p>
            </div>
            {% endif %}
        </div>
    </div>
</body>
</html>
